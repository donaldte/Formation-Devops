aws code deploy 

ecrire du code: cloud9(VSC) 
manager et stocker le code: AWS CODE COMMIT(git et github)
build et le test: aws codebuild 
deploy: aws codedeploy(automatiser)
    ---> du travail 
    ---> error 
logging et le monitoring: cloudtrail et cloudwatch 
aws codepipeline

deploy/release ..........> EC2 ou lambda function

plusierus serveur (deployment group)





Pourquoi utiliser AWS CodeDeploy ? ğŸ¤”

AWS CodeDeploy est un service qui simplifie
 et automatise le dÃ©ploiement d'applications
  vers diffÃ©rents environnements. Comparons les
   mÃ©thodes de dÃ©ploiement manuelles, 
   basÃ©es sur des scripts, et l'utilisation 
   d'AWS CodeDeploy.

1ï¸âƒ£ DÃ©ploiement manuel (Manual Deployment) ğŸ› ï¸
Avec le manuel, vous dÃ©ployez directement 
sur le serveur (avec des commandes manuelles).
InconvÃ©nients (Disadvantages) :

ğŸ•’ Consomme du temps (time-consuming) : 
    Chaque Ã©tape doit Ãªtre rÃ©alisÃ©e Ã  la main.
âŒ Source d'erreurs (error-prone) : 
    Les erreurs humaines sont frÃ©quentes.
ğŸŒ€ Manque de cohÃ©rence (lack of consistency) :
     Le dÃ©ploiement peut varier d'un environnement Ã  l'autre.
âš¡ Utilisation inefficace des ressources (inefficient resource utilization) : 
    Le processus est peu optimisÃ©.
ğŸ“‰ Ã‰volutivitÃ© limitÃ©e (limited scalability) :
     Difficile Ã  appliquer Ã  de nombreux serveurs.
ğŸš« Pas de mÃ©canisme de retour arriÃ¨re (no rollback mechanism) : 
    Impossible d'annuler facilement un dÃ©ploiement 
    en cas de problÃ¨me.
    
2ï¸âƒ£ DÃ©ploiement avec scripts (Script-based Deployment) ğŸ’»
Vous Ã©crivez du code pour automatiser le dÃ©ploiement.
InconvÃ©nients (Disadvantages) :

âœï¸ Ã‰crire les scripts (write script) : 
    Cela demande du temps et des compÃ©tences.
ğŸ§© ComplexitÃ© (complexity) : 
    Plus l'application est grande, plus le script devient
     complexe.
âš ï¸ Gestion limitÃ©e des erreurs (limited error handling) :
     Les scripts ne gÃ¨rent pas toujours bien les Ã©checs.
ğŸŒ€ Manque de cohÃ©rence (inconsistency) :
     Les rÃ©sultats peuvent varier selon l'environnement.
ğŸš« Pas de fonctionnalitÃ©s avancÃ©es (lack of advanced features) : 
    Comme le basculement de trafic.
ğŸ“‰ Ã‰volutivitÃ© limitÃ©e (limited scalability) :
     Pas idÃ©al pour de grandes infrastructures.
ğŸ”§ Entretien lourd (maintenance overhead) : 
    Les scripts doivent Ãªtre constamment mis Ã  jour.

    
ğŸŒŸ Avantages d'AWS CodeDeploy ğŸŒŸ
Pourquoi choisir AWS CodeDeploy plutÃ´t que d'autres outils ?

âœ… Supporte plusieurs types de dÃ©ploiements (Supports different types of deployment).
ğŸ› ï¸ Facile Ã  intÃ©grer avec d'autres outils (Easy to work with other tools).
âš™ï¸ Configuration simple (Easy to setup).
ğŸ› ï¸ Personnalisation (Allows customization of your deployment).
ğŸ”„ Rollback facile (Rollback if something goes wrong).
â³ Gain de temps (Saves time).
ğŸ”— IntÃ©gration fluide (Easy integration).
ğŸŒ DÃ©ploiement multi-environnements (Supports multiple environments: dev, test, prod).
ğŸš¦ Basculement de trafic (Traffic shifting).
ğŸ’° Ã‰conomique (Cost-effective).





ğŸ“‹ StratÃ©gies de dÃ©ploiement (Deployment Strategies)

1ï¸âƒ£ Blue/Green Deployment ğŸš¦

CrÃ©ation de deux environnements :
     l'ancien (blue) et le nouveau (green). 
     Une fois validÃ©, le trafic est basculÃ© 
     vers le nouvel environnement.


2ï¸âƒ£ Rolling Deployment ğŸ”„

Mise Ã  jour progressive des serveurs en 
dÃ©ployant le code par lot.


3ï¸âƒ£ Canary Deployment ğŸ¤

DÃ©ploiement sur une petite portion de serveurs 
pour tester avant un dÃ©ploiement complet.


4ï¸âƒ£ Shadow Deployment ğŸŒ˜

DÃ©ploiement silencieux pour surveiller 
le comportement de la nouvelle version sans
 affecter les utilisateurs.


5ï¸âƒ£ A/B Deployment ğŸ…°ï¸ğŸ…±ï¸

Comparaison de deux versions de l'application 
pour Ã©valuer laquelle est la meilleure.

6ï¸âƒ£ Continuous Deployment â™¾ï¸

Automatisation complÃ¨te : chaque changement validÃ© dans
 le code est immÃ©diatement dÃ©ployÃ©.

7ï¸âƒ£ In-Place Deployment ğŸ“

Mise Ã  jour directe sur les serveurs existants 
sans crÃ©er de nouvel environnement.




































AWS CodeDeploy est un service de dÃ©ploiement entiÃ¨rement gÃ©rÃ© qui automatise
 le dÃ©ploiement des applications sur des plateformes variÃ©es :

ğŸ’» Amazon EC2 (instances virtuelles).
ğŸŒ AWS Lambda (applications serverless).
ğŸ›¢ï¸ Amazon ECS (services conteneurisÃ©s).
ğŸ  Serveurs locaux (On-premises).

L'objectif principal de CodeDeploy est d'assurer 
des dÃ©ploiements fiables, rapides, et sans interruption (zÃ©ro downtime).

Les Composants Essentiels dâ€™AWS CodeDeploy ğŸ”‘
1. Application ğŸ—ï¸
L'application reprÃ©sente le groupe logique des ressources que vous souhaitez dÃ©ployer.

Exemple : Une application web en Python/Django ou PHP pour un site e-commerce.
2. Plateforme de Calcul ğŸ’»
Câ€™est la destination oÃ¹ votre application sera dÃ©ployÃ©e. AWS CodeDeploy prend en charge les plateformes suivantes :

Amazon EC2 : Instances virtuelles.
AWS Lambda : FonctionnalitÃ©s serverless.
Amazon ECS : Conteneurs (Docker ou Kubernetes).
Serveurs locaux (On-premises) : Vos propres serveurs physiques.

3. IAM Instance Profile ğŸ›¡ï¸
Le profil dâ€™instance IAM est un rÃ´le attachÃ© aux instances EC2 ou serveurs locaux. Il permet Ã  CodeDeploy d'accÃ©der aux ressources nÃ©cessaires pour gÃ©rer les dÃ©ploiements (par ex., rÃ©cupÃ©rer la rÃ©vision depuis S3).

Exemple : IAM role avec les permissions pour accÃ©der Ã  des buckets S3 et logs CloudWatch.
4. Service Role ğŸ©
Un rÃ´le de service IAM donne Ã  AWS CodeDeploy les autorisations nÃ©cessaires pour effectuer des actions, telles que :

Mettre Ã  jour les instances EC2.
Modifier les services ECS.
ExÃ©cuter des commandes sur des fonctions Lambda.
Exemple : RÃ´le IAM avec la politique AWSCodeDeployRole.

5. Revision ğŸ“¦
Câ€™est le contenu de dÃ©ploiement, c'est-Ã -dire les fichiers qui dÃ©finissent ce qui doit Ãªtre dÃ©ployÃ©. Les rÃ©visions peuvent inclure :

Code de l'application (ex. Python, Node.js).
Fichiers de configuration (JSON, YAML).
Scripts (ex. Bash).
Les rÃ©visions sont stockÃ©es dans :

Amazon S3.
GitHub ou un autre dÃ©pÃ´t.
6. Target Revision ğŸ¯
La rÃ©vision cible est la version spÃ©cifique de votre application que vous souhaitez dÃ©ployer. Cela permet de dÃ©ployer des versions prÃ©cises, comme v1.2.3.

7. Application Specification File ğŸ“„
Un AppSpec file est utilisÃ© pour dÃ©finir comment le dÃ©ploiement doit Ãªtre effectuÃ© sur chaque plateforme. Par exemple :

OÃ¹ copier les fichiers.
Quelles commandes exÃ©cuter avant, pendant ou aprÃ¨s le dÃ©ploiement.
Comment gÃ©rer les hooks de cycle de vie.
Format :

YAML pour EC2 et on-premises.
JSON pour AWS Lambda.
8. CodeDeploy Agent ğŸ¤–
L'agent CodeDeploy est un logiciel installÃ© sur des instances EC2 ou serveurs locaux. Il gÃ¨re les Ã©tapes suivantes :

RÃ©cupÃ¨re la rÃ©vision Ã  partir de S3/GitHub.
ExÃ©cute les commandes dÃ©finies dans le fichier AppSpec.
Signale lâ€™Ã©tat du dÃ©ploiement (rÃ©ussi ou Ã©chouÃ©).
9. Instance Health â¤ï¸
Lâ€™Ã©tat de santÃ© des instances est essentiel pendant un dÃ©ploiement. AWS CodeDeploy surveille les cibles pour s'assurer qu'elles sont fonctionnelles. Si une instance Ã©choue, le dÃ©ploiement peut Ãªtre annulÃ©.

Les Types de DÃ©ploiement ğŸš¦
1. AllAtOnce ğŸš€
Description : Toutes les cibles reÃ§oivent la mise Ã  jour en mÃªme temps.
Avantage : Rapide.
InconvÃ©nient : Risque Ã©levÃ© si le dÃ©ploiement Ã©choue.
UtilisÃ© avec : EC2, on-premises, Lambda.
2. Rolling ğŸ”„
Description : Mise Ã  jour progressive par petits groupes d'instances (ex. 25% Ã  la fois).
Avantage : Moins de risque dâ€™interruption.
InconvÃ©nient : Plus lent que AllAtOnce.
UtilisÃ© avec : EC2, ECS.
3. Rolling with Additional Batch â•
Description : Ajoute une ou plusieurs instances supplÃ©mentaires au pool avant de commencer le dÃ©ploiement, puis les retire Ã  la fin.
Avantage : Minimise les risques de surcharge.
UtilisÃ© avec : EC2, ECS.
4. Blue/Green ğŸŸ¦ğŸŸ©
Description : DÃ©ploie la nouvelle version dans un environnement distinct. Une fois validÃ©e, le trafic est redirigÃ© vers la nouvelle version.
Avantage : ZÃ©ro interruption.
InconvÃ©nient : CoÃ»te plus cher.
UtilisÃ© avec : EC2, ECS, Lambda.
5. Canary ğŸ¦
Description : DÃ©ploie sur un petit pourcentage dâ€™instances (ex. 10%) avant de dÃ©ployer sur le reste.
Avantage : Surveillance facile des problÃ¨mes.
UtilisÃ© avec : Lambda, ECS.
6. Linear ğŸ“Š
Description : DÃ©ploie des lots dâ€™instances Ã  intervalles rÃ©guliers.
Avantage : Similaire Ã  Rolling mais avec un contrÃ´le temporel.
UtilisÃ© avec : Lambda, ECS.
7. Immutable ğŸ›¡ï¸
Description : CrÃ©e de nouvelles instances pour dÃ©ployer la mise Ã  jour, puis dÃ©truit les anciennes.
Avantage : TrÃ¨s sÃ©curisÃ©.
UtilisÃ© avec : EC2.
Quel Type de DÃ©ploiement pour Quel Serveur ?
Plateforme	DÃ©ploiement RecommandÃ©
EC2	Rolling, Immutable, Blue/Green
Lambda	Canary, AllAtOnce, Linear
ECS	Blue/Green, Rolling
On-premises	Rolling, AllAtOnce
Exemple de ScÃ©nario Complet ğŸŒŸ
ScÃ©nario 1 : DÃ©ploiement d'une Application Django
Plateforme : Instances EC2.
Fichiers nÃ©cessaires :
Code de l'application stockÃ© dans S3.
Fichier AppSpec (YAML) pour dÃ©finir le dÃ©ploiement.
Type de dÃ©ploiement : Rolling (25 % des instances Ã  la fois).
Ã‰tapes :
CrÃ©er un groupe de dÃ©ploiement avec les instances EC2 taguÃ©es Environment=Production.
Configurer un rÃ´le IAM avec accÃ¨s Ã  S3 et CodeDeploy.
Lancer le dÃ©ploiement via AWS CodeDeploy.
Questions pour RÃ©vision â“
Quâ€™est-ce quâ€™un IAM Instance Profile ?

RÃ©ponse : Un rÃ´le IAM attachÃ© aux instances EC2 pour permettre lâ€™accÃ¨s aux ressources (ex. S3).
Ã€ quoi sert le fichier AppSpec ?

RÃ©ponse : DÃ©finir comment et oÃ¹ les fichiers doivent Ãªtre dÃ©ployÃ©s, et quelles commandes exÃ©cuter.
Quel type de dÃ©ploiement garantit zÃ©ro interruption ?

RÃ©ponse : Le dÃ©ploiement Blue/Green.
Quelles plateformes sont prises en charge par AWS CodeDeploy ?

RÃ©ponse : EC2, Lambda, ECS, on-premises.
Conclusion ğŸŒŸ
AWS CodeDeploy est un outil puissant pour automatiser les dÃ©ploiements.
Les rÃ´les IAM, AppSpec files, et types de dÃ©ploiements doivent Ãªtre bien configurÃ©s.
Le choix du type de dÃ©ploiement dÃ©pend de la plateforme et de vos besoins en termes de disponibilitÃ©.




















